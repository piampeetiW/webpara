<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/public/css/log.css">
    <title>Market Auction</title>
</head>
<style>
    .card {
        height: 13em;
        width: 25em;
        margin-bottom: 2em;
        background-color: #e9e9e9;
        border-color: #e9e9e9;
        text-align: center;
        padding: 1.5em;
    }

    #area {
        font-size: medium;
        margin-top: 1em;
    }
</style>

<body id="body">
    <div class="fixed-top">
        <nav class="navbar " id="navhome">
            <div class="container-fluid" id="home">
                <button class="btn" type="button" id="btnhome">
                    <h3 id="taladH">ตลาดประมูลการยางภาคเหนือ</h3>
                </button>
                <div class="dropdown">
                    <button type="button" id="username" class="btn" data-bs-toggle="dropdown"><img
                            src="/public/img/userbutton.png" alt="" id="textuse"> Username</button>

                    <ul class="dropdown-menu" id="dropuser">
                        <li><a class="dropdown-item" href="#" id="profiledropM"><img src="/public/img/userdrop.png"
                                    alt="" id="img1">Profile</a></li>
                        <li><a class="dropdown-item" href="#" id="passworddropM"><img src="/public/img/key.png" alt=""
                                    id="img1">Change
                                Passwaord</a></li>
                        <li><a class="dropdown-item" href="#" id="auctiondropM"><img src="/public/img/auctionuser.png"
                                    alt="" id="img1">Auction</a></li>
                        <li><a class="dropdown-item" href="#" id="logouthome"><img src="/public/img/logout.png" alt=""
                                    id="img1">Log
                                out</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <nav class="navbar" id="navmenu">
            <div class="btn-group" id="groupmenu">
                <button type="button" class="btn" id="btn1">Home Page</button>
                <button type="button" class="btn" id="btn2"
                    style="background-color: #9F6E3F; color: black;">Market</button>
                <button type="button" class="btn" id="btn5">Auction Manual</button>
            </div>
        </nav>
    </div>

    <div>
        <h2 style="padding-top:4.5em ;padding-bottom: 0.5em;text-align:center;">ตลาดใหญ่</h2>

    </div>

    <!-- <div class="row" id="cardbigm">

        <div class="col-sm-6" style="padding-left: 11.3em;" id="leftbigm">
            <div class="card">
                <div class="card-body">
                    <img src="/public/img/auctionuser.png" alt="hammer" id="hammer">
                    <p id="area">ตลาดประมูลยางภูมิภาคเหนือ</p>
                    <button id="select">เลือก</button>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <img src="/public/img/auctionuser.png" alt="hammer" id="hammer">
                    <p id="area">ตลาดประมูลยางภูมิภาคกลาง</p>
                    <button id="select">เลือก</button>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <img src="/public/img/auctionuser.png" alt="hammer" id="hammer">
                    <p id="area">ตลาดประมูลยางภูมิภาคใต้ฝั่งตะวันออก</p>
                    <button id="select">เลือก</button>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <img src="/public/img/auctionuser.png" alt="hammer" id="hammer">
                    <p id="area">ตลาดประมูลยาง กรุงเทพมหานครและปริมณฑล</p>
                    <button id="select">เลือก</button>
                </div>
            </div>

        </div>

        <div class="col-sm-6" style="padding-left: 4.9em;" id="rightbigm">
            <div class="card">
                <div class="card-body">
                    <img src="/public/img/auctionuser.png" alt="hammer" id="hammer">
                    <p id="area">ตลาดประมูลยางภูมิภาคตะวันออกเฉียงเหนือ</p>
                    <button id="select">เลือก</button>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <img src="/public/img/auctionuser.png" alt="hammer" id="hammer">
                    <p id="area">ตลาดประมูลยางภูมิภาคตะวันออกรวมทั้งชายฝั่ง</p>
                    <button id="select">เลือก</button>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <img src="/public/img/auctionuser.png" alt="hammer" id="hammer">
                    <p id="area">ตลาดประมูลยางภูมิภาคใต้ฝั่งตะวันตก</p>
                    <button id="select">เลือก</button>
                </div>
            </div>
        </div>

    </div> -->

    <div class="container">
        <div class="row">
            <div class="col-sm-6" style="padding-left: 11.3em;" id="leftbigm">
                <!-- Left Side -->

            </div>
            <div class="col-sm-6" style="padding-left: 4.9em; " id="rightbigm">
                <!-- Right Side -->
            </div>
        </div>
    </div>


    <script>










        document.addEventListener('DOMContentLoaded', async function () {
    try {
        const response = await fetch('/HelloNodejs/api/markets');
        const markets = await response.json();

        // Filter markets with active status 'Yes'
        const activeMarkets = markets.filter(market => market.active === 'Yes');

        // Split active markets into odd and even numbers
        const oddMarkets = activeMarkets.filter((_, index) => index % 2 === 0);
        const evenMarkets = activeMarkets.filter((_, index) => index % 2 !== 0);

        // Function to create a card element
        function createCard(market) {
            const card = document.createElement('div');
            card.style.backgroundColor = '#CAD7C2';
            card.className = 'card';
            card.innerHTML = `
                <div class="card-body">
                    <img src="/public/img/auctionuser.png" alt="hammer" id="hammer">
                    <p id="area">${market.market_name}</p>
                    <button id="${market.id}" class="select-button" style="background-color: #FFF1DB; border: none; border-radius: 25px; width: 5em;" data-market-id="${market.id}">
                        <h6 id="textbigM" style="margin-top: 0.4em;">เลือก</h6>
                    </button>
                </div>
            `;

            const selectButton = card.querySelector('.select-button');
            selectButton.style.transition = 'opacity 0.3s ease-in-out';

            selectButton.addEventListener('mouseenter', function () {
                selectButton.style.opacity = '1.0';
                selectButton.style.color = '#B99470';
            });

            selectButton.addEventListener('mouseleave', function () {
                selectButton.style.opacity = '1.0';
                selectButton.style.color = '#000';
            });

            return card;
        }

        // Append odd markets to the left side
        const leftContainer = document.getElementById('leftbigm');
        oddMarkets.forEach(market => {
            const card = createCard(market);
            leftContainer.appendChild(card);
        });

        // Append even markets to the right side
        const rightContainer = document.getElementById('rightbigm');
        evenMarkets.forEach(market => {
            const card = createCard(market);
            rightContainer.appendChild(card);
        });

        // Add click event listener to select buttons dynamically
markets.forEach(market => {
    const selectButton = document.getElementById(`${market.id}`);
    
    // Check if the market's id is equal to 1 before adding the click event listener
    if (market.id === 1) {
        selectButton.addEventListener('click', function () {
            location.assign(`/HelloNodejs/smallmarket?id=${market.id}`);
        });
    }
});
    } catch (error) {
        console.error('Error fetching markets:', error);
    }
});
















        //============================== root ===========================//
        document.querySelector('#btnhome').onclick = function () {
            location.assign('/HelloNodejs/homepage');
        }

        document.querySelector('#btn1').onclick = function () {
            location.assign('/HelloNodejs/homepage');
        }

        document.querySelector('#btn3').onclick = function () {
            location.assign('/HelloNodejs/historyauc');
        }

        document.querySelector('#btn4').onclick = function () {
            location.assign('/HelloNodejs/profile');
        }

        document.querySelector('#profiledropM').onclick = function () {
            location.assign('/HelloNodejs/profile');
        }



    </script>


</body>

</html>